<html>

<head>
	<link rel=stylesheet href=StyleSheet.css type=text/css>
	<style type=text/css>
	<!--
			li	{	padding-bottom: 0.75em;
				}
	-->
	</style>

	<!--
		Auto versioning is handled by Webware/bin/setversion.py.
		This will automatically update version and release date
		information embedded within HTML comment tags.

		Note however that comment tags within a title block seem to
		not be interpreted as comments in Mozilla 1.2.1
	-->
	<title>MiddleKit Release Notes</title>
</head>

<body>

<h1>MiddleKit Release Notes</h1>
Version  <!-- version --> X.Y <!-- /version --> <br>
Webware for Python  <!-- version --> X.Y <!-- /version -->
Released on <!-- relDate --> @@/@@/@@ <!-- /relDate -->


<a name=Incompatible><h2>Incompatible Changes</h2></a>
<ul>
	<li> <font color=red>There are some MiddleKit improvements that break compatibility with previous versions of MiddleKit, although all are easy to address. Read below.</font>
</ul>

<h3>Obj Ref Columns</h3>

<p> A long standing flaw in MiddleKit was the use of 64-bit integer SQL columns to store references/pointers to objects. The first 32-bits were for the class id and the second 32-bits were for the object id, information that is necessary because of inheritance and the creation of one SQL table per Python class. These 64-bit columns, packed with two numbers, are difficult to work with from SQL. For example, an object reference to (classId=1, objId=1) showed as 4294967297 in SQL and could not be readily joined with other tables.

<p> The new approach is to break these values into two SQL columns. If the attribute name is "foo" then the SQL columns will be named "fooClassId" and "fooObjId". If, for some reason, you don't like those suffixes, you can customize them through the setting <a href=UsersGuide.html#Configuration_ObjRefSuffixes >ObjRefSuffixes</a>. As always, the class ids are stored in the _MKClassIds table that MiddleKit automatically generates.

<p> <font color=red>If you are upgrading Webware then your database schema will no longer be compatible with MiddleKit.</font> The easy way to fix this is to set UseBigIntObjRefColumns to True in Settings.config (see <a href=UsersGuide.html#Configuration_UseBigIntObjRefColumns>User's Guide - Configuration</a> for more information). This will give you the old behavior. The hard way is to fix up your schema and migrate the data from the old columns to the new.


<h3>SQLGenerator.config</h3>

<p> There used to be another config file, besides Settings.config, named SQLGenerator.config, with a single setting, DropStatements. That file is no longer used and the setting has been moved to Settings.config. If you have SQLGenerator.config in a model directory, move the setting over.


<h3>MS SQL Support</h3>

<p> The <span class=name>float</span> type now yields a SQL type of <span class=name>float</span> rather than <span class=name>decimal</span>, because that matches the semantics of Python's float type more closely (perhaps identically). If you want decimal, use decimal; it is a valid MiddleKit datatype.

<p> The serial primary key field is now typed as int instead of bigint. This matches the MiddleKit approach for other databases and also allows object id columns to be foreign keys to this primary key (MS SQL will give an error if an int column tries to reference a bigint column).


<h2>New Features</h2>
<ul>
	<li> You can specify a <b>SQLDefault</b> for attributes. <a href=UsersGuide.html#MT_SQLDefault>docs</a>
</ul>


<h2>Improvements and Refinements</h2>
<ul>
	<li><b>Generate.py</b> does a better job of detecting errors in the class definitions and sample values than before. You are more likely to see a useful error message than a cryptic traceback. However, in those cases where an exception does occur, you can see that just before the exception, Generate.py prints the last attribute that it was processing before the error. You can then search for that attribute in your model and troubleshoot it.

</ul>


<h2>Security</h2>
<ul>
	<li> *
</ul>


<h2>Minor API Changes</h2>
<ul>
	<li> *
</ul>


<h2>Bugfixes</h2>
<ul>
	<li> *
</ul>


<p><hr>

</body>
</html>
