<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>MiddleKit/Core/MiddleDict.py</title>
<!--css-->

<style type="text/css">
<!--
body{ background: #EEF;
font-family: Verdana, Arial, Helvetica, sans-serif;
font-size: 10pt;
padding: 3pt; }
.PY_KEYWORD{ color: #00C; font-weight: bold; }
.PY_COMMENT{ color: #008; }
.PY_PARAMETER{ color: #C00; }
.PY_IDENTIFIER{ color: #C00; font-weight: bold; }
.PY_STRING{ color: #080; }
-->
</style>
</head>
<body>
<!--header-->

<!--script-->
<pre><span class="PY_KEYWORD">
class</span> MiddleDict(dict):
    <span class="PY_STRING">"""A MiddleKit dictionary.

    A dictionary for the purposes of MiddleKit, specifically Klass and Attr
    which are subclasses.

    @@ 2004-04-02 CE: Should consider making this case-preserving, but
       case-insensitive with respect to keys.

    """</span>

    <span class="PY_KEYWORD">def</span> boolForKey(self, key, default=False):
        <span class="PY_STRING">"""Return True or False for the given key.

        Returns False if the key does not even exist.
        Raises a value error if the key exists, but cannot be parsed as a bool.

        """</span>
        original = self.get(key, default)
        s = original
        <span class="PY_KEYWORD">if</span> isinstance(s, basestring):
            s = s.lower().strip()
        <span class="PY_KEYWORD">if</span> s <span class="PY_KEYWORD">in</span> (False, <span class="PY_STRING">''</span>, None, 0, 0.0, <span class="PY_STRING">'0'</span>, <span class="PY_STRING">'false'</span>):
            <span class="PY_KEYWORD">return</span> False
        <span class="PY_KEYWORD">elif</span> s <span class="PY_KEYWORD">in</span> (True, 1, <span class="PY_STRING">'1'</span>, 1.0, <span class="PY_STRING">'true'</span>):
            <span class="PY_KEYWORD">return</span> True
        <span class="PY_KEYWORD">else</span>:
            <span class="PY_KEYWORD">raise</span> ValueError(<span class="PY_STRING">'%r for attr %r should be a boolean value'</span>
                <span class="PY_STRING">' (1, 0, True, False) but is %r instead'</span>
                % (key, self.get(<span class="PY_STRING">'Name'</span>, <span class="PY_STRING">'(UNNAMED)'</span>), original))
</pre>
<!--footer-->

</body>
</html>
