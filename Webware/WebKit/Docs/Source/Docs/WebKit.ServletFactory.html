
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module WebKit.ServletFactory</title>
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong><a href="WebKit.html"><font color="#ffffff">WebKit</font></a>.ServletFactory</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/var/www/docs/Webware-1.1.1/WebKit/ServletFactory.py">/var/www/docs/Webware-1.1.1/WebKit/ServletFactory.py</a></font></td></tr></table>
    <p><tt>Servlet&nbsp;factory&nbsp;template.</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="os.html">os</a><br>
</td><td width="25%" valign=top><a href="sys.html">sys</a><br>
</td><td width="25%" valign=top><a href="threading.html">threading</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ee77aa">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Classes</strong></big></font></td></tr>
    
<tr><td bgcolor="#ee77aa"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl>
<dt><font face="helvetica, arial"><a href="__builtin__.html#object">__builtin__.object</a>
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="WebKit.ServletFactory.html#ServletFactory">ServletFactory</a>
</font></dt><dd>
<dl>
<dt><font face="helvetica, arial"><a href="WebKit.ServletFactory.html#PythonServletFactory">PythonServletFactory</a>
</font></dt></dl>
</dd>
</dl>
</dd>
</dl>
 <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="PythonServletFactory">class <strong>PythonServletFactory</strong></a>(<a href="WebKit.ServletFactory.html#ServletFactory">ServletFactory</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>The&nbsp;factory&nbsp;for&nbsp;Python&nbsp;servlets.<br>
&nbsp;<br>
This&nbsp;is&nbsp;the&nbsp;factory&nbsp;for&nbsp;ordinary&nbsp;Python&nbsp;servlets&nbsp;whose&nbsp;extensions<br>
are&nbsp;empty&nbsp;or&nbsp;.py.&nbsp;The&nbsp;servlets&nbsp;are&nbsp;unique&nbsp;per&nbsp;file&nbsp;since&nbsp;the&nbsp;file<br>
itself&nbsp;defines&nbsp;the&nbsp;servlet.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%"><dl><dt>Method resolution order:</dt>
<dd><a href="WebKit.ServletFactory.html#PythonServletFactory">PythonServletFactory</a></dd>
<dd><a href="WebKit.ServletFactory.html#ServletFactory">ServletFactory</a></dd>
<dd><a href="__builtin__.html#object">__builtin__.object</a></dd>
</dl>
<hr>
Methods defined here:<br>
<dl><dt><a name="PythonServletFactory-extensions"><strong>extensions</strong></a>(self)</dt></dl>

<dl><dt><a name="PythonServletFactory-loadClass"><strong>loadClass</strong></a>(self, transaction, path)</dt></dl>

<dl><dt><a name="PythonServletFactory-uniqueness"><strong>uniqueness</strong></a>(self)</dt></dl>

<hr>
Methods inherited from <a href="WebKit.ServletFactory.html#ServletFactory">ServletFactory</a>:<br>
<dl><dt><a name="PythonServletFactory-__init__"><strong>__init__</strong></a>(self, application)</dt><dd><tt>Create&nbsp;servlet&nbsp;factory.<br>
&nbsp;<br>
Stores&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;application&nbsp;in&nbsp;self.<strong>_app</strong>,&nbsp;because<br>
subclasses&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;need&nbsp;to&nbsp;talk&nbsp;back&nbsp;to&nbsp;the&nbsp;application<br>
to&nbsp;do&nbsp;their&nbsp;work.</tt></dd></dl>

<dl><dt><a name="PythonServletFactory-flushCache"><strong>flushCache</strong></a>(self)</dt><dd><tt>Flush&nbsp;the&nbsp;servlet&nbsp;cache&nbsp;and&nbsp;start&nbsp;fresh.<br>
&nbsp;<br>
Servlets&nbsp;that&nbsp;are&nbsp;currently&nbsp;in&nbsp;the&nbsp;wild&nbsp;may&nbsp;find&nbsp;their&nbsp;way&nbsp;back<br>
into&nbsp;the&nbsp;cache&nbsp;(this&nbsp;may&nbsp;be&nbsp;a&nbsp;problem).</tt></dd></dl>

<dl><dt><a name="PythonServletFactory-importAsPackage"><strong>importAsPackage</strong></a>(self, transaction, serverSidePathToImport)</dt><dd><tt>Import&nbsp;requested&nbsp;module.<br>
&nbsp;<br>
Imports&nbsp;the&nbsp;module&nbsp;at&nbsp;the&nbsp;given&nbsp;path&nbsp;in&nbsp;the&nbsp;proper&nbsp;package/subpackage<br>
for&nbsp;the&nbsp;current&nbsp;request.&nbsp;For&nbsp;example,&nbsp;if&nbsp;the&nbsp;transaction&nbsp;has&nbsp;the&nbsp;URL<br>
<a href="http://localhost/WebKit.cgi/MyContextDirectory/MySubdirectory/MyPage">http://localhost/WebKit.cgi/MyContextDirectory/MySubdirectory/MyPage</a><br>
and&nbsp;path&nbsp;=&nbsp;'some/random/path/MyModule.py'&nbsp;and&nbsp;the&nbsp;context&nbsp;is&nbsp;configured<br>
to&nbsp;have&nbsp;the&nbsp;name&nbsp;'MyContext'&nbsp;then&nbsp;this&nbsp;function&nbsp;imports&nbsp;the&nbsp;module&nbsp;at<br>
that&nbsp;path&nbsp;as&nbsp;MyContext.MySubdirectory.MyModule&nbsp;.&nbsp;Note&nbsp;that&nbsp;the&nbsp;context<br>
name&nbsp;may&nbsp;differ&nbsp;from&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;directory&nbsp;containing&nbsp;the&nbsp;context,<br>
even&nbsp;though&nbsp;they&nbsp;are&nbsp;usually&nbsp;the&nbsp;same&nbsp;by&nbsp;convention.<br>
&nbsp;<br>
Note&nbsp;that&nbsp;the&nbsp;module&nbsp;imported&nbsp;may&nbsp;have&nbsp;a&nbsp;different&nbsp;name&nbsp;from&nbsp;the<br>
servlet&nbsp;name&nbsp;specified&nbsp;in&nbsp;the&nbsp;URL.&nbsp;This&nbsp;is&nbsp;used&nbsp;in&nbsp;PSP.</tt></dd></dl>

<dl><dt><a name="PythonServletFactory-name"><strong>name</strong></a>(self)</dt><dd><tt>Return&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;factory.<br>
&nbsp;<br>
This&nbsp;is&nbsp;a&nbsp;convenience&nbsp;for&nbsp;the&nbsp;class&nbsp;name.</tt></dd></dl>

<dl><dt><a name="PythonServletFactory-returnServlet"><strong>returnServlet</strong></a>(self, servlet)</dt><dd><tt>Return&nbsp;servlet&nbsp;to&nbsp;the&nbsp;pool.<br>
&nbsp;<br>
Called&nbsp;by&nbsp;Servlet.close(),&nbsp;which&nbsp;returns&nbsp;the&nbsp;servlet<br>
to&nbsp;the&nbsp;servlet&nbsp;pool&nbsp;if&nbsp;necessary.</tt></dd></dl>

<dl><dt><a name="PythonServletFactory-servletForTransaction"><strong>servletForTransaction</strong></a>(self, transaction)</dt><dd><tt>Return&nbsp;a&nbsp;new&nbsp;servlet&nbsp;that&nbsp;will&nbsp;handle&nbsp;the&nbsp;transaction.<br>
&nbsp;<br>
This&nbsp;method&nbsp;handles&nbsp;caching,&nbsp;and&nbsp;will&nbsp;call&nbsp;<a href="#PythonServletFactory-loadClass">loadClass</a>(trans,&nbsp;filepath)<br>
if&nbsp;no&nbsp;cache&nbsp;is&nbsp;found.&nbsp;Caching&nbsp;is&nbsp;generally&nbsp;controlled&nbsp;by&nbsp;servlets<br>
with&nbsp;the&nbsp;canBeReused()&nbsp;and&nbsp;canBeThreaded()&nbsp;methods.</tt></dd></dl>

<hr>
Data descriptors inherited from <a href="WebKit.ServletFactory.html#ServletFactory">ServletFactory</a>:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table> <p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#ffc8d8">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#000000" face="helvetica, arial"><a name="ServletFactory">class <strong>ServletFactory</strong></a>(<a href="__builtin__.html#object">__builtin__.object</a>)</font></td></tr>
    
<tr bgcolor="#ffc8d8"><td rowspan=2><tt>&nbsp;&nbsp;&nbsp;</tt></td>
<td colspan=2><tt>Servlet&nbsp;factory&nbsp;template.<br>
&nbsp;<br>
<a href="#ServletFactory">ServletFactory</a>&nbsp;is&nbsp;an&nbsp;abstract&nbsp;class&nbsp;that&nbsp;defines&nbsp;the&nbsp;protocol&nbsp;for<br>
all&nbsp;servlet&nbsp;factories.<br>
&nbsp;<br>
Servlet&nbsp;factories&nbsp;are&nbsp;used&nbsp;by&nbsp;the&nbsp;Application&nbsp;to&nbsp;create&nbsp;servlets<br>
for&nbsp;transactions.<br>
&nbsp;<br>
A&nbsp;factory&nbsp;must&nbsp;inherit&nbsp;from&nbsp;this&nbsp;class&nbsp;and&nbsp;override&nbsp;<a href="#ServletFactory-uniqueness">uniqueness</a>(),<br>
<a href="#ServletFactory-extensions">extensions</a>()&nbsp;and&nbsp;either&nbsp;<a href="#ServletFactory-loadClass">loadClass</a>()&nbsp;or&nbsp;<a href="#ServletFactory-servletForTransaction">servletForTransaction</a>().<br>
Do&nbsp;not&nbsp;invoke&nbsp;the&nbsp;base&nbsp;class&nbsp;methods&nbsp;as&nbsp;they&nbsp;all&nbsp;raise&nbsp;AbstractErrors.<br>
&nbsp;<br>
Each&nbsp;method&nbsp;is&nbsp;documented&nbsp;below.<br>&nbsp;</tt></td></tr>
<tr><td>&nbsp;</td>
<td width="100%">Methods defined here:<br>
<dl><dt><a name="ServletFactory-__init__"><strong>__init__</strong></a>(self, application)</dt><dd><tt>Create&nbsp;servlet&nbsp;factory.<br>
&nbsp;<br>
Stores&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;application&nbsp;in&nbsp;self.<strong>_app</strong>,&nbsp;because<br>
subclasses&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;need&nbsp;to&nbsp;talk&nbsp;back&nbsp;to&nbsp;the&nbsp;application<br>
to&nbsp;do&nbsp;their&nbsp;work.</tt></dd></dl>

<dl><dt><a name="ServletFactory-extensions"><strong>extensions</strong></a>(self)</dt><dd><tt>Return&nbsp;a&nbsp;list&nbsp;of&nbsp;extensions&nbsp;that&nbsp;match&nbsp;this&nbsp;handler.<br>
&nbsp;<br>
Extensions&nbsp;should&nbsp;include&nbsp;the&nbsp;dot.&nbsp;An&nbsp;empty&nbsp;string&nbsp;indicates&nbsp;a&nbsp;file<br>
with&nbsp;no&nbsp;extension&nbsp;and&nbsp;is&nbsp;a&nbsp;valid&nbsp;value.&nbsp;The&nbsp;extension&nbsp;'.*'&nbsp;is&nbsp;a&nbsp;special<br>
case&nbsp;that&nbsp;is&nbsp;looked&nbsp;for&nbsp;a&nbsp;URL's&nbsp;extension&nbsp;doesn't&nbsp;match&nbsp;anything.</tt></dd></dl>

<dl><dt><a name="ServletFactory-flushCache"><strong>flushCache</strong></a>(self)</dt><dd><tt>Flush&nbsp;the&nbsp;servlet&nbsp;cache&nbsp;and&nbsp;start&nbsp;fresh.<br>
&nbsp;<br>
Servlets&nbsp;that&nbsp;are&nbsp;currently&nbsp;in&nbsp;the&nbsp;wild&nbsp;may&nbsp;find&nbsp;their&nbsp;way&nbsp;back<br>
into&nbsp;the&nbsp;cache&nbsp;(this&nbsp;may&nbsp;be&nbsp;a&nbsp;problem).</tt></dd></dl>

<dl><dt><a name="ServletFactory-importAsPackage"><strong>importAsPackage</strong></a>(self, transaction, serverSidePathToImport)</dt><dd><tt>Import&nbsp;requested&nbsp;module.<br>
&nbsp;<br>
Imports&nbsp;the&nbsp;module&nbsp;at&nbsp;the&nbsp;given&nbsp;path&nbsp;in&nbsp;the&nbsp;proper&nbsp;package/subpackage<br>
for&nbsp;the&nbsp;current&nbsp;request.&nbsp;For&nbsp;example,&nbsp;if&nbsp;the&nbsp;transaction&nbsp;has&nbsp;the&nbsp;URL<br>
<a href="http://localhost/WebKit.cgi/MyContextDirectory/MySubdirectory/MyPage">http://localhost/WebKit.cgi/MyContextDirectory/MySubdirectory/MyPage</a><br>
and&nbsp;path&nbsp;=&nbsp;'some/random/path/MyModule.py'&nbsp;and&nbsp;the&nbsp;context&nbsp;is&nbsp;configured<br>
to&nbsp;have&nbsp;the&nbsp;name&nbsp;'MyContext'&nbsp;then&nbsp;this&nbsp;function&nbsp;imports&nbsp;the&nbsp;module&nbsp;at<br>
that&nbsp;path&nbsp;as&nbsp;MyContext.MySubdirectory.MyModule&nbsp;.&nbsp;Note&nbsp;that&nbsp;the&nbsp;context<br>
name&nbsp;may&nbsp;differ&nbsp;from&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;directory&nbsp;containing&nbsp;the&nbsp;context,<br>
even&nbsp;though&nbsp;they&nbsp;are&nbsp;usually&nbsp;the&nbsp;same&nbsp;by&nbsp;convention.<br>
&nbsp;<br>
Note&nbsp;that&nbsp;the&nbsp;module&nbsp;imported&nbsp;may&nbsp;have&nbsp;a&nbsp;different&nbsp;name&nbsp;from&nbsp;the<br>
servlet&nbsp;name&nbsp;specified&nbsp;in&nbsp;the&nbsp;URL.&nbsp;This&nbsp;is&nbsp;used&nbsp;in&nbsp;PSP.</tt></dd></dl>

<dl><dt><a name="ServletFactory-loadClass"><strong>loadClass</strong></a>(self, transaction, path)</dt><dd><tt>Load&nbsp;the&nbsp;appropriate&nbsp;class.<br>
&nbsp;<br>
Given&nbsp;a&nbsp;transaction&nbsp;and&nbsp;a&nbsp;path,&nbsp;load&nbsp;the&nbsp;class&nbsp;for&nbsp;creating&nbsp;these<br>
servlets.&nbsp;Caching,&nbsp;pooling,&nbsp;and&nbsp;threadsafeness&nbsp;are&nbsp;all&nbsp;handled&nbsp;by<br>
servletForTransaction.&nbsp;This&nbsp;method&nbsp;is&nbsp;not&nbsp;expected&nbsp;to&nbsp;be&nbsp;threadsafe.</tt></dd></dl>

<dl><dt><a name="ServletFactory-name"><strong>name</strong></a>(self)</dt><dd><tt>Return&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;factory.<br>
&nbsp;<br>
This&nbsp;is&nbsp;a&nbsp;convenience&nbsp;for&nbsp;the&nbsp;class&nbsp;name.</tt></dd></dl>

<dl><dt><a name="ServletFactory-returnServlet"><strong>returnServlet</strong></a>(self, servlet)</dt><dd><tt>Return&nbsp;servlet&nbsp;to&nbsp;the&nbsp;pool.<br>
&nbsp;<br>
Called&nbsp;by&nbsp;Servlet.close(),&nbsp;which&nbsp;returns&nbsp;the&nbsp;servlet<br>
to&nbsp;the&nbsp;servlet&nbsp;pool&nbsp;if&nbsp;necessary.</tt></dd></dl>

<dl><dt><a name="ServletFactory-servletForTransaction"><strong>servletForTransaction</strong></a>(self, transaction)</dt><dd><tt>Return&nbsp;a&nbsp;new&nbsp;servlet&nbsp;that&nbsp;will&nbsp;handle&nbsp;the&nbsp;transaction.<br>
&nbsp;<br>
This&nbsp;method&nbsp;handles&nbsp;caching,&nbsp;and&nbsp;will&nbsp;call&nbsp;<a href="#ServletFactory-loadClass">loadClass</a>(trans,&nbsp;filepath)<br>
if&nbsp;no&nbsp;cache&nbsp;is&nbsp;found.&nbsp;Caching&nbsp;is&nbsp;generally&nbsp;controlled&nbsp;by&nbsp;servlets<br>
with&nbsp;the&nbsp;canBeReused()&nbsp;and&nbsp;canBeThreaded()&nbsp;methods.</tt></dd></dl>

<dl><dt><a name="ServletFactory-uniqueness"><strong>uniqueness</strong></a>(self)</dt><dd><tt>Return&nbsp;uniqueness&nbsp;type.<br>
&nbsp;<br>
Returns&nbsp;a&nbsp;string&nbsp;to&nbsp;indicate&nbsp;the&nbsp;uniqueness&nbsp;of&nbsp;the&nbsp;<a href="#ServletFactory">ServletFactory</a>'s<br>
servlets.&nbsp;The&nbsp;Application&nbsp;needs&nbsp;to&nbsp;know&nbsp;if&nbsp;the&nbsp;servlets&nbsp;are&nbsp;unique<br>
per&nbsp;file,&nbsp;per&nbsp;extension&nbsp;or&nbsp;per&nbsp;application.<br>
&nbsp;<br>
Return&nbsp;values&nbsp;are&nbsp;'file',&nbsp;'extension'&nbsp;and&nbsp;'application'.<br>
&nbsp;<br>
NOTE:&nbsp;Application&nbsp;only&nbsp;supports&nbsp;'file'&nbsp;uniqueness&nbsp;at&nbsp;this&nbsp;point&nbsp;in&nbsp;time.</tt></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><tt>dictionary&nbsp;for&nbsp;instance&nbsp;variables&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><tt>list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object&nbsp;(if&nbsp;defined)</tt></dd>
</dl>
</td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-iskeyword"><strong>iskeyword</strong></a> = __contains__(...)</dt><dd><tt>x.__contains__(y)&nbsp;&lt;==&gt;&nbsp;y&nbsp;in&nbsp;x.</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>debug</strong> = False</td></tr></table>
</body></html>