<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>WebKit/OneShotAppServer.py</title>
<!--css-->

<style type="text/css">
<!--
body{ background: #EEF;
font-family: Verdana, Arial, Helvetica, sans-serif;
font-size: 10pt;
padding: 3pt; }
.PY_KEYWORD{ color: #00C; font-weight: bold; }
.PY_COMMENT{ color: #008; }
.PY_PARAMETER{ color: #C00; }
.PY_IDENTIFIER{ color: #C00; font-weight: bold; }
.PY_STRING{ color: #080; }
-->
</style>
</head>
<body>
<!--header-->

<!--script-->
<pre><span class="PY_COMMENT">#!/usr/bin/env python</span>

<span class="PY_STRING">"""OneShotAppServer

This version of the app server is in support of the OneShot adapter.

This class creates an application that has no session sweeper thread,
and it provides the convenience method dispatchRawRequest().

See also: OneShot.cgi and OneShotAdapter.py.

"""</span>

<span class="PY_KEYWORD">from</span> AppServer <span class="PY_KEYWORD">import</span> AppServer
<span class="PY_KEYWORD">from</span> Application <span class="PY_KEYWORD">import</span> Application


<span class="PY_KEYWORD">class</span> OneShotAppServer(AppServer):

    <span class="PY_KEYWORD">def</span> __init__(self, path=None):
        AppServer.__init__(self, path)
        self.readyForRequests()

    <span class="PY_KEYWORD">def</span> recordPID(self):
        self._pidFile = None

    <span class="PY_KEYWORD">def</span> isPersistent(self):
        <span class="PY_KEYWORD">return</span> False

    <span class="PY_KEYWORD">def</span> createApplication(self):
        <span class="PY_KEYWORD">return</span> Application(server=self, useSessionSweeper=False)

    <span class="PY_KEYWORD">def</span> dispatchRawRequest(self, newRequestDict, strmOut):
        self._requestID += 1
        newRequestDict[<span class="PY_STRING">'requestID'</span>] = self._requestID
        <span class="PY_KEYWORD">return</span> self._app.dispatchRawRequest(newRequestDict, strmOut)
</pre>
<!--footer-->

</body>
</html>
